<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:th="http://www.thymeleaf.org"
      xmlns:tiles="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org"
      lang="en">

<head>

    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <!-- This <head> section is only used for static prototyping purposes. At runtime, -->
    <!-- Tiles will only use the body fragment defined with tiles:fragment="content",  --> 
    <!-- as specified at the corresponding views.xml file.                             -->
    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

    <title>Time Reporting Server</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
            
	<!-- Blue print framework CSS -->  
    <link rel="stylesheet" href="../styles/blueprint/screen.css" type="text/css" media="screen, projection">
    <link rel="stylesheet" href="../styles/blueprint/print.css" type="text/css" media="print"> 
    <!--[if IE]><link rel="stylesheet" href="../styles/blueprint/ie.css" type="text/css" media="screen, projection" /><![endif]-->  
        
    <link rel="stylesheet" type="text/css" media="screen" href="../styles/tps.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="../styles/dark_login/style.css" />
    
    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  -->
    <!-- Some styles and scripts are served from spring-js-resources-{ver}.jar at -->
    <!-- runtime. Therefore not available for static prototyping. See the         -->
    <!-- layouts/standard.html template file for detail.                          -->
    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  -->
    
</head>

<div id="header" >
	<h1>
        <a href="/">TRS</a>
    </h1>
    <div id="navigation">
        <nav>
            <ul>
                <li>Login</li>
                <li>Register</li>
            </ul>
        </nav>    
    </div>
</div>

<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<!-- START of the content to be included in the execution result.  -->
<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<!-- Only the markup inside this <body> would be required in this  -->
<!-- template if no static prototyping was intended.               -->
<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<body tiles:fragment="content">

<div class="prepend-6 span-10 append-2 last" 
     xmlns:th="http://www.thymeleaf.org"
     th:with="lastUsernameKey=${T(org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter).SPRING_SECURITY_LAST_USERNAME_KEY},
              lastExceptionKey=${T(org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter).SPRING_SECURITY_LAST_EXCEPTION_KEY}">
    
    <form name="f" action="#" th:action="@{/loginProcess}" method="post" class="login">
    
            <p>
                <label for="login">User:</label>
                <input type="text" name="j_username" id="login"
                       th:value="${param.login_error} ? ${session[__${lastUsernameKey}__]} : ''" />
            </p>
            
            <script type="text/javascript">
                // <![CDATA[
                    Spring.addDecoration(new Spring.ElementDecoration({
                        elementId : "login",
                        widgetType : "dijit.form.ValidationTextBox",
                        widgetAttrs : { required : true }}));
                // ]]>
            </script>
            
            <p>
                <label for="password">Password:</label>
                <input type="password" name="j_password" id="password" />
            </p>
            
            <script type="text/javascript">
                // <![CDATA[
                    Spring.addDecoration(new Spring.ElementDecoration({
                        elementId : "password",
                        widgetType : "dijit.form.ValidationTextBox",
                        widgetAttrs : { required : true}}));
                // ]]>
            </script>
            
            <p class="login-submit">
                <button id="submit" type="submit" class="login-button">Login</button>
                <script type="text/javascript">
                    Spring.addDecoration(
                            new Spring.ValidateAllDecoration({event : 'onclick', elementId : 'submit'}));
                </script>
            </p>            
            
                <p class="forgot-password"><a href="index.html">Forgot your password?</a></p>
    </form>    
</div>

<div class="prepend-6 span-10 append-2 last">
    <div class="error" th:if="${param.login_error}">
    	<p>
	        Your login attempt was not successful, try again.<br />
			Reason: <span th:text="${session[__${lastExceptionKey}__].message}">Invalid password</span> 
        <p>
    </div>
</div>
    
<script>
document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1"></' + 'script>')
</script>

</body>
<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<!-- END of the content to be included in the execution result -->
<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

</html>

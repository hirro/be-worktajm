/**
 * angular-tokenauth
 * @version v0.0.7 - 2013-09-21
 * @link 
 * @author  <>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.module("tokenauth",["webStorageModule","ngCookies"]).provider("Auth",function(){this.url="/auth",this.setUrl=function(a){this.url=a},this.$get=["webStorage","$http","$q","$cookies",function(a,b,c,d){var e=d.csrftoken,f=this.url;return{logged:function(){return!!a.session.get("token")},login:function(d,g){var h=c.defer();return b({method:"POST",url:f,data:{username:d,password:g},headers:{"X-CSRFToken":e}}).success(function(b){a.session.add("token",b.token),a.session.add("username",d),h.resolve({success:"login",username:d})}).error(function(a){h.reject(a)}),h.promise},logout:function(){a.session.remove("token"),a.session.remove("username")},user:function(){return{username:a.session.get("username"),token:a.session.get("token")}}}}]});
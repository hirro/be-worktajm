<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<flow xmlns="http://www.springframework.org/schema/webflow"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/webflow http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">

	<var name="registration" class="com.arnellconsulting.tps.webflow.Registration" />
	
	<!-- User information -->
	<view-state id="user-information-state" view="registration/user-information" model="registration">
		<transition on="success" to="account-verification-state" />
		<transition on="cancel" to="cancelled-state" />
	</view-state>

	<!-- Account verification -->
	<view-state id="account-verification-state" view="registration/account-verification" model="registration">
		<transition on="success" to="complete-state">
			<evaluate expression="registration.persist" />
		</transition>
		<transition on="cancel" to="cancelled-state" />
	</view-state>

	<!-- Registration canceled -->
	<view-state id="cancelled-state" view="registration/cancelled">
		<transition on="restart" to="user-information-state" />
	</view-state>

	<!-- Success -->
	<end-state id="complete-state" view="registration/complete" />

</flow>
